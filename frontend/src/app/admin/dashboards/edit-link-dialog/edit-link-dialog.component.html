<h2 mat-dialog-title id="edit-link-dialog-title">Edit Link</h2>
<mat-dialog-content>
  <form [formGroup]="form" class="dialog-form" aria-labelledby="edit-link-dialog-title">
    <mat-form-field appearance="outline">
      <mat-label>URL</mat-label>
      <input
        matInput
        formControlName="url"
        placeholder="https://example.com"
        required
        [attr.aria-invalid]="form.get('url')?.invalid && form.get('url')?.touched"
        [attr.aria-describedby]="
          form.get('url')?.invalid && form.get('url')?.touched ? 'url-error' : null
        "
      />
      @if (form.get('url')?.hasError('required') && form.get('url')?.touched) {
        <mat-error id="url-error">URL is required</mat-error>
      }
      @if (form.get('url')?.hasError('pattern') && form.get('url')?.touched) {
        <mat-error>Please enter a valid URL</mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Title</mat-label>
      <input
        matInput
        formControlName="title"
        placeholder="Link title"
        required
        [attr.aria-invalid]="form.get('title')?.invalid && form.get('title')?.touched"
        [attr.aria-describedby]="
          form.get('title')?.invalid && form.get('title')?.touched ? 'title-error' : null
        "
      />
      @if (form.get('title')?.hasError('required') && form.get('title')?.touched) {
        <mat-error id="title-error">Title is required</mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Description (Optional)</mat-label>
      <textarea
        matInput
        formControlName="description"
        placeholder="Link description"
        rows="3"
      ></textarea>
    </mat-form-field>

    <app-icon-picker formControlName="icon"></app-icon-picker>

    <app-tag-input formControlName="tags"></app-tag-input>
  </form>
</mat-dialog-content>
<mat-dialog-actions align="end">
  <button mat-button (click)="onCancel()" type="button" aria-label="Cancel editing link">
    Cancel
  </button>
  <button
    mat-raised-button
    color="primary"
    (click)="onSubmit()"
    [disabled]="!form.valid || loading"
    type="button"
    aria-label="Update link"
  >
    {{ loading ? 'Updating...' : 'Update Link' }}
  </button>
</mat-dialog-actions>
