<mat-sidenav-container class="admin-container">
  <mat-sidenav mode="side" opened class="admin-sidenav">
    <div class="sidenav-header">
      <mat-icon class="logo-icon">bookmark</mat-icon>
      <div class="logo-text">
        <span class="app-name">Bookmark Bureau</span>
        <span class="admin-label">Administration</span>
      </div>
    </div>

    <nav aria-label="Administration menu">
      <mat-nav-list class="menu-list" role="navigation">
        <!-- Dashboards section -->
        <div class="nav-section">
          <a
            mat-list-item
            routerLink="/admin/dashboards"
            routerLinkActive="active-link"
            [routerLinkActiveOptions]="{ exact: true }"
            class="section-header"
            (click)="toggleDashboards()"
            [attr.aria-expanded]="dashboardsExpanded"
            [attr.aria-label]="'Dashboards ' + (dashboardsExpanded ? 'expanded' : 'collapsed')"
          >
            <mat-icon matListItemIcon aria-hidden="true">dashboard</mat-icon>
            <span matListItemTitle>Dashboards</span>
            <span matListItemMeta>
              <mat-icon class="expand-icon" aria-hidden="true">{{
                dashboardsExpanded ? 'expand_more' : 'chevron_right'
              }}</mat-icon>
            </span>
          </a>

          <!-- Nested dashboard list -->
          <div class="nested-list" *ngIf="dashboardsExpanded">
            <a
              *ngFor="let dashboard of topDashboards"
              mat-list-item
              [routerLink]="['/admin/dashboards', dashboard.dashboard_id, 'overview']"
              routerLinkActive="active-link"
              class="nested-item"
            >
              <mat-icon matListItemIcon>article</mat-icon>
              <span matListItemTitle>{{ dashboard.title }}</span>
            </a>
          </div>
        </div>

        <!-- Divider before other menu items -->
        <mat-divider class="section-divider"></mat-divider>

        <!-- Tags -->
        <a mat-list-item routerLink="/admin/tags" routerLinkActive="active-link">
          <mat-icon matListItemIcon aria-hidden="true">label</mat-icon>
          <span matListItemTitle>Tags</span>
        </a>
      </mat-nav-list>
    </nav>

    <div class="sidenav-footer">
      <mat-divider></mat-divider>
      <button mat-list-item (click)="logout()" class="footer-button" aria-label="Logout">
        <mat-icon matListItemIcon aria-hidden="true">logout</mat-icon>
        <span matListItemTitle>Logout</span>
      </button>
      <button
        mat-list-item
        (click)="navigateToDashboards()"
        class="footer-button"
        aria-label="Back to dashboards"
      >
        <mat-icon matListItemIcon aria-hidden="true">arrow_back</mat-icon>
        <span matListItemTitle>Back to Dashboards</span>
      </button>
    </div>
  </mat-sidenav>

  <mat-sidenav-content>
    <header class="mat-elevation-z2">
      <mat-toolbar>
        <mat-icon aria-hidden="true">settings</mat-icon>
        <h1 class="toolbar-title">Administration Panel</h1>
      </mat-toolbar>
    </header>

    <main class="admin-content" role="main">
      <router-outlet></router-outlet>
    </main>
  </mat-sidenav-content>
</mat-sidenav-container>
